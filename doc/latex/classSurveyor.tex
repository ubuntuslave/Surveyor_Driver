\hypertarget{classSurveyor}{
\section{Surveyor Class Reference}
\label{classSurveyor}\index{Surveyor@{Surveyor}}
}
\hyperlink{classSurveyor}{Surveyor} SRV-1 (with ARM-7 processor).  


{\tt \#include $<$src/surveyor\_\-driver.h$>$}

\subsection*{Public Member Functions}
\begin{CompactItemize}
\item 
\hyperlink{classSurveyor_b0792137ec4760d15de63856ebeb7464}{Surveyor} (ConfigFile $\ast$cf, int section)
\begin{CompactList}\small\item\em Constructor for the \hyperlink{classSurveyor}{Surveyor} multi-interface driver. \item\end{CompactList}\item 
int \hyperlink{classSurveyor_c127d6028c08790fe79902b1b8359468}{Setup} ()
\begin{CompactList}\small\item\em Setup up the device and start the device thread by calling StartThread(), which spawns a new thread and executes Surveyor::Main(), which contains the main loop for the driver). \item\end{CompactList}\item 
int \hyperlink{classSurveyor_cfe0180d05f0a34474a75cdfd87b1a81}{Shutdown} ()
\begin{CompactList}\small\item\em Shut down the device. \item\end{CompactList}\item 
int \hyperlink{classSurveyor_9af107b9b363d15951303c3cbaf4328f}{ProcessMessage} (QueuePointer \&resp\_\-queue, player\_\-msghdr $\ast$hdr, void $\ast$data)
\begin{CompactList}\small\item\em Message Handler sends a response if necessary using Publish(). This function is called once for each message in the incoming queue. \item\end{CompactList}\end{CompactItemize}


\subsection{Detailed Description}
\hyperlink{classSurveyor}{Surveyor} SRV-1 (with ARM-7 processor). 

These robots can be controlled via ZigBee which is attached to a USB serial port on a host computer. The host computer runs the server which then communicates to the robot.

\begin{Desc}
\item[Note:]The newer SRV-1 robot (with Blackfin processor) has not yet been tested with this driver.\end{Desc}
\begin{Desc}
\item[Compile-time dependencies]\end{Desc}
\begin{itemize}
\item none\end{itemize}


\begin{Desc}
\item[Provides]\end{Desc}
The surveyor driver provides the following device interfaces:

\begin{itemize}
\item interface\_\-position2d\item This interface does not return odometry data, but accepts velocity commands.\end{itemize}


\begin{itemize}
\item interface\_\-camera\item The camera on the robot returns JPEG images.\end{itemize}


\begin{itemize}
\item interface\_\-ir\item The robot has 4 IR beacons which can act as rudimentary range-finders\item UNIMPLEMENTED\end{itemize}


\begin{itemize}
\item interface\_\-dio\item The robot has 5 pins which can be used as digital in/out ports.\item UNIMPLEMENTED\end{itemize}


\begin{Desc}
\item[Supported configuration requests]\end{Desc}
\begin{itemize}
\item none\end{itemize}


\begin{Desc}
\item[Configuration file options]\end{Desc}
\begin{itemize}
\item port (string)\item Default: \char`\"{}/dev/ttyUSB0\char`\"{}\item Serial port used to communicate with the robot\item image\_\-size (string)\item Default: \char`\"{}320x240\char`\"{}\item Size of the images returned by the camera.\item Allowed values: \char`\"{}320x240\char`\"{}, \char`\"{}160x128\char`\"{}, \char`\"{}80x64\char`\"{}\end{itemize}


\begin{Desc}
\item[Example]\end{Desc}


\footnotesize\begin{verbatim}
 driver
 (
 name "surveyor"
 provides ["position2d:0" "camera:0"]
 port "/dev/ttyUSB0"
 )
 \end{verbatim}
\normalsize


\begin{Desc}
\item[\hyperlink{todo__todo000001}{Todo}]\begin{itemize}
\item Implement IR\item Implement DIO\item Property bags to change image size on the fly\item Opaque interface to set program\end{itemize}
\end{Desc}
\begin{Desc}
\item[Author:]Michael Janssen (original author) 

Carlos Jaramillo (current maintainer) \end{Desc}


Definition at line 112 of file surveyor\_\-driver.h.

\subsection{Constructor \& Destructor Documentation}
\hypertarget{classSurveyor_b0792137ec4760d15de63856ebeb7464}{
\index{Surveyor@{Surveyor}!Surveyor@{Surveyor}}
\index{Surveyor@{Surveyor}!Surveyor@{Surveyor}}
\subsubsection[{Surveyor}]{\setlength{\rightskip}{0pt plus 5cm}Surveyor::Surveyor (ConfigFile $\ast$ {\em cf}, \/  int {\em section})}}
\label{classSurveyor_b0792137ec4760d15de63856ebeb7464}


Constructor for the \hyperlink{classSurveyor}{Surveyor} multi-interface driver. 

Constructor for the \hyperlink{classSurveyor}{Surveyor} driver. Retrieves options from the configuration file, allocates memory for each interface and then reads and adds the interfaces provided in the configuration file.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em cf}]Current configuration file \item[{\em section}]Current section in configuration file \end{description}
\end{Desc}


Definition at line 38 of file surveyor\_\-driver.cc.

\subsection{Member Function Documentation}
\hypertarget{classSurveyor_9af107b9b363d15951303c3cbaf4328f}{
\index{Surveyor@{Surveyor}!ProcessMessage@{ProcessMessage}}
\index{ProcessMessage@{ProcessMessage}!Surveyor@{Surveyor}}
\subsubsection[{ProcessMessage}]{\setlength{\rightskip}{0pt plus 5cm}int Surveyor::ProcessMessage (QueuePointer \& {\em resp\_\-queue}, \/  player\_\-msghdr $\ast$ {\em hdr}, \/  void $\ast$ {\em data})}}
\label{classSurveyor_9af107b9b363d15951303c3cbaf4328f}


Message Handler sends a response if necessary using Publish(). This function is called once for each message in the incoming queue. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em resp\_\-queue}]The queue to which any response should go \item[{\em hdr}]The message header \item[{\em data}]The message body \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]0 if the message in handled, and -1 otherwise. A NACK (Negative Acknowledgment) will be sent if a response is required. \end{Desc}


Definition at line 188 of file surveyor\_\-driver.cc.\hypertarget{classSurveyor_c127d6028c08790fe79902b1b8359468}{
\index{Surveyor@{Surveyor}!Setup@{Setup}}
\index{Setup@{Setup}!Surveyor@{Surveyor}}
\subsubsection[{Setup}]{\setlength{\rightskip}{0pt plus 5cm}int Surveyor::Setup ()}}
\label{classSurveyor_c127d6028c08790fe79902b1b8359468}


Setup up the device and start the device thread by calling StartThread(), which spawns a new thread and executes Surveyor::Main(), which contains the main loop for the driver). 

\begin{Desc}
\item[Returns:]0 if things go well, and -1 otherwise. \end{Desc}


Definition at line 85 of file surveyor\_\-driver.cc.\hypertarget{classSurveyor_cfe0180d05f0a34474a75cdfd87b1a81}{
\index{Surveyor@{Surveyor}!Shutdown@{Shutdown}}
\index{Shutdown@{Shutdown}!Surveyor@{Surveyor}}
\subsubsection[{Shutdown}]{\setlength{\rightskip}{0pt plus 5cm}int Surveyor::Shutdown ()}}
\label{classSurveyor_cfe0180d05f0a34474a75cdfd87b1a81}


Shut down the device. 

\begin{Desc}
\item[Returns:]0 when the device has been completely shut down. \end{Desc}


Definition at line 107 of file surveyor\_\-driver.cc.

The documentation for this class was generated from the following files:\begin{CompactItemize}
\item 
src/surveyor\_\-driver.h\item 
src/surveyor\_\-driver.cc\end{CompactItemize}
